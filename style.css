* { margin: 0; padding: 0; box-sizing: border-box; }
:root{
  --pink:#ff6f91; --pink-dark:#ff4e78; --paper:#fffdf7; --ink:#2a2a2a;
}
body{
  height:100vh; width:100vw; overflow:hidden;
  font-family: 'Poppins', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  background: linear-gradient(135deg,#ff9a9e 0%, #fad0c4 35%, #fbc2eb 100%);
  color:#fff; display:flex; align-items:center; justify-content:center;
}
.container{ text-align:center; position:relative; z-index:2; padding: 16px; }
.wish{ font-size: clamp(28px, 4vw, 54px); animation: glow 2s infinite alternate; }
.sub{ margin: 10px 0 20px; font-size: clamp(14px, 1.8vw, 18px); opacity:.95; }
.btns{ display:flex; gap:12px; justify-content:center; flex-wrap:wrap; }

button{
  padding: 10px 18px; font-size: 16px; border:none; border-radius: 999px;
  background: var(--pink); color:white; cursor:pointer; transition: transform .25s, box-shadow .25s;
  box-shadow: 0 8px 20px rgba(0,0,0,.15);
}
button:hover{ transform: translateY(-2px); }
button.secondary{ background: #5b8cff; }

@keyframes glow {
  from { text-shadow: 0 0 10px #fff, 0 0 30px var(--pink), 0 0 50px var(--pink-dark); }
  to   { text-shadow: 0 0 20px #fff, 0 0 50px var(--pink), 0 0 80px var(--pink-dark); }
}

/* Fireworks canvas behind everything */
#fireworks{
  position: fixed; inset: 0; width:100%; height:100%; z-index:1;
}

/* Letter modal */
.backdrop{
  position: fixed; inset:0; background: rgba(0,0,0,.45);
  display:none; align-items:center; justify-content:center; z-index: 5;
  backdrop-filter: blur(2px);
}
.backdrop.show{ display:flex; animation: fadeIn .25s ease; }
@keyframes fadeIn{ from{opacity:0} to{opacity:1} }

.letter{
  position: relative; width: min(92vw, 520px);
  transform-style: preserve-3d;
  perspective: 1200px;
  border-radius: 20px; padding-top: 80px; /* space for envelope top */
}
.close{
  position:absolute; top:-8px; right:-8px; width:36px; height:36px; border-radius:50%;
  background:#111; color:#fff; font-size:22px; line-height:36px; text-align:center;
  border:none; cursor:pointer; box-shadow: 0 8px 20px rgba(0,0,0,.25);
}

.envelope-top{
  position:absolute; top:0; left:50%; transform: translateX(-50%) rotateX(0deg);
  width: 88%; height: 80px; background: #ffd2e1; clip-path: polygon(0 100%,50% 0,100% 100%);
  border-top-left-radius:16px; border-top-right-radius:16px; box-shadow: 0 10px 25px rgba(0,0,0,.15);
  transform-origin: top; z-index:3;
}
.envelope-bottom{
  position:absolute; bottom:-16px; left:50%; transform: translateX(-50%);
  width: 88%; height: 40px; background: #ffc2d9; border-bottom-left-radius:16px; border-bottom-right-radius:16px;
  filter: drop-shadow(0 8px 16px rgba(0,0,0,.15));
}

/* The paper (letter content) */
.paper{
  position:relative; margin: 0 auto; width:88%; min-height: 320px;
  background: var(--paper);
  color: var(--ink);
  border-radius: 20px; padding: 26px 22px;
  box-shadow: 0 12px 30px rgba(0,0,0,.18), inset 0 0 0 1px rgba(0,0,0,.04);
  transform-origin: top center; transform: rotateX(25deg) translateY(-18px);
  opacity: 0;
}
.paper.show{
  animation: dropOpen .6s cubic-bezier(.2,.9,.2,1) forwards .25s;
}
@keyframes dropOpen{
  0% { opacity:0; transform: rotateX(25deg) translateY(-18px); }
  100%{ opacity:1; transform: rotateX(0deg) translateY(0); }
}

.paper h2{ margin-bottom: 8px; font-size: 22px; }
.paper p{ line-height: 1.6; font-size: 15.5px; }
.paper .signoff{ margin-top:16px; font-style: italic; opacity:.85; }

/* Typewriter caret */
#typed{
  min-height: 120px;
  border-right: 2px solid var(--ink);
  white-space: pre-wrap;
  overflow-wrap: anywhere;
  animation: caret .9s steps(1) infinite;
}
@keyframes caret{ 50%{ border-right-color: transparent; } }

/* Open animation for envelope flap */
.backdrop.opening .envelope-top{
  animation: flapOpen .6s cubic-bezier(.2,.9,.2,1) forwards;
}
@keyframes flapOpen{
  0% { transform: translateX(-50%) rotateX(0deg); }
  100%{ transform: translateX(-50%) rotateX(-160deg); }
}

/* Action row */
.letter-actions{
  display:flex; gap:10px; justify-content:center; margin-top: 14px;
}
.letter-actions button{
  background:#111; color:#fff;
}
